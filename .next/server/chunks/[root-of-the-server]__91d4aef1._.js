module.exports=[18622,(e,t,n)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,n)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,n)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},70406,(e,t,n)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},93695,(e,t,n)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},2157,(e,t,n)=>{t.exports=e.x("node:fs",()=>require("node:fs"))},50227,(e,t,n)=>{t.exports=e.x("node:path",()=>require("node:path"))},45192,e=>{"use strict";e.s(["allNews",0,[{id:9,slug:"teszt",title:"Teszt",excerpt:"Ez egy teszt szöveg teszt szövege",content:'<h1 style="text-align:center; font-size: 2.5em; color:#7b1e1e; text-shadow: 1px 1px 2px #ccc;">\n            Advent a Zarándokházban\n        </h1>\n    \n\n    <section style="max-width: 800px; margin: 0 auto;">\n        <p>\n            Az advent a várakozás és az elcsendesedés időszaka, és mi a \n            <strong style="font-style: italic; text-decoration: underline;">Zarándokházban különleges módon</strong> \n            szeretnénk megünnepelni ezt az időszakot veletek.\n        </p>\n\n        <hr style="border:0; height:1px; background:linear-gradient(to right, transparent, #b85c5c, transparent); margin:30px 0;">\n\n        <h2 style="color:#8d2f2f; text-shadow: 1px 1px 1px #eee;">Adventi Estek Programja</h2>\n\n        <p>\n            December minden hétvégéjén, péntektől vasárnapig, különleges adventi esteket szervezünk. \n            A program minden este 18:00-kor kezdődik és éjfélig tart.\n        </p>\n\n        <p>\n            A hangulatos gyertyafényes estéken házi készítésű forralt borral és punccsal várunk benneteket. \n            Konyhánk \n            <strong style="font-style: italic; text-decoration: underline;">különleges adventi finomságokat</strong> \n            készít: mézeskalács, fahéjas alma pite és más téli csemegék kerülnek az asztalra.\n        </p>\n\n        <h2 style="color:#8d2f2f; margin-top:30px; text-shadow: 1px 1px 1px #eee;">Élő Zene</h2>\n\n        <p>\n            Minden szombat este élő zenével fokozzuk a hangulatot. \n            Helyi művészek jazz és akusztikus feldolgozásokban adják elő a legszebb adventi dalokat, \n            de nem maradnak el a klasszikus magyar népdalok sem.\n        </p>\n\n        <blockquote style="font-style:italic; margin:25px; padding:15px 25px; background:#faf4f4; border-left:4px solid #b85c5c; box-shadow:0 0 6px #eee;">\n            „Az advent a Zarándokházban nem csak egy esemény, hanem egy közösségi élmény, \n            ahol barátok és idegenek találkoznak a meleg fényben.”\n        </blockquote>\n\n        <h2 style="color:#8d2f2f; margin-top:30px; text-shadow: 1px 1px 1px #eee;">Foglalás és Információk</h2>\n\n        <p>\n            Az adventi estékre nem szükséges előzetes foglalás, de a szállás foglalásához kérjük, \n            vegyétek fel velünk a kapcsolatot. A teljes adventi időszakban \n            <strong style="font-style: italic; text-decoration: underline;">10% kedvezményt</strong> \n            biztosítunk a szobafoglalásokra.\n        </p>\n\n        <p style="font-weight:bold;">\n            Várunk szeretettel minden zarándokot, aki a karácsony előtti hetekben egy kis békességre vágyik!\n        </p>\n\n    </section>',date:"2025. december 11.",readTime:"15 perc",image:"https://cdn01.dailycaller.com/wp-content/uploads/2019/06/Test-Shutterstock.jpg",category:"Esemény",featured:!0,author:"",authorImage:""},{id:1,slug:"advent-a-zarandokhazban",title:"Advent a Zarándokházban",excerpt:"December minden hétvégéjén különleges adventi estek forralt borral és élő zenével. Csatlakozz hozzánk a várakozás idején!",content:'<p>Az advent a várakozás és az elcsendesedés időszaka, és mi a Zarándokházban különleges módon szeretnénk megünnepelni ezt az időszakot veletek.</p>\n      \n      <h2>Adventi Estek Programja</h2>\n      \n      <p>December minden hétvégéjén, péntektől vasárnapig, különleges adventi esteket szervezünk. A program minden este 18:00-kor kezdődik és éjfélig tart.</p>\n      \n      <p>A hangulatos gyertyafényes estéken házi készítésű forralt borral és punccsal várunk benneteket. Konyhánk különleges adventi finomságokat készít: mézeskalács, fahéjas alma pite és más téli csemegék kerülnek az asztalra.</p>\n      \n      <h2>Élő Zene</h2>\n      \n      <p>Minden szombat este élő zenével fokozzuk a hangulatot. Helyi művészek jazz és akusztikus feldolgozásokban adják elő a legszebb adventi dalokat, de nem maradnak el a klasszikus magyar népdalok sem.</p>\n      \n      <blockquote>"Az advent a Zarándokházban nem csak egy esemény, hanem egy közösségi élmény, ahol barátok és idegenek találkoznak a meleg fényben."</blockquote>\n      \n      <h2>Foglalás és Információk</h2>\n      \n      <p>Az adventi estékre nem szükséges előzetes foglalás, de a szállás foglalásához kérjük, vegyétek fel velünk a kapcsolatot. A teljes adventi időszakban 10% kedvezményt biztosítunk a szobafoglalásokra.</p>\n      \n      <p>Várunk szeretettel minden zarándokot, aki a karácsony előtti hetekben egy kis békességre vágyik!</p>',date:"2025. december 1.",readTime:"4 perc",image:"/cozy-advent-candles-wine-bar-dark-atmosphere-chris.jpg",category:"Esemény",author:"Kovács Márton",authorImage:"/friendly-hungarian-man-portrait.jpg"},{id:2,slug:"uj-teli-menunk-erkezett",title:"Új téli menünk érkezett",excerpt:"Meleg levesek, laktató főételek és bűnös desszertek – konyhánk téli kínálata megérkezett.",content:'\n\n      <p>A hideg idő beköszöntével konyhánk séfje, Tóth Bence, elkészítette az idei téli menüt, amely a hagyományos magyar ízeket modern köntösben tálalva kínálja.</p>\n      \n      <h2>Előételek és Levesek</h2>\n      \n      <p>A hideg estéken nincs is jobb, mint egy forró leves. Kínálatunkban megtalálható a klasszikus gulyásleves, a füstölt csülkös bableves és az újdonságunk, a sütőtök krémleves pirított tökmaggal.</p>\n      \n      <h2>Főételek</h2>\n      \n      <p>A főételek között szerepel a lassú tűzön főtt marhapörkölt házi nokedlivel, a ropogós kacsacomb párolt káposztával és a vegetáriánus töltött paprika.</p>\n      \n      <blockquote>"A téli menü minden fogása a magyar konyha tiszteletére készült, de nem félünk újítani sem." - Tóth Bence, séf</blockquote>\n      \n      <h2>Desszertek</h2>\n      \n      <p>Desszertjeink között megtalálható a klasszikus somlói galuska, a meleg almás pite vaníliasodóval és az új kedvencünk, a sós karamellás palacsinta.</p>\n      \n      <p>A téli menü december 1-től március végéig érhető el. Asztalfoglaláshoz hívjatok minket vagy használjátok online foglalási rendszerünket!</p>\n    \n    ',date:"2025. november 28.",readTime:"3 perc",image:"/hungarian-winter-food-soup-hearty-meal-dark-restau.jpg",category:"Gasztronómia",author:"Nagy Eszter",authorImage:"/friendly-hungarian-woman-portrait-chef.jpg"},{id:3,slug:"szilveszteri-vigilia",title:"Szilveszteri Vigília",excerpt:"Az év utolsó éjszakáját töltsd nálunk! Élő zene, tombola és éjféli pezsgő várja a zarándokokat.",content:"\n\n      <p>Búcsúztassuk együtt az óévet és köszöntsük az újat a Zarándokház különleges szilveszteri mulatságán!</p>\n      \n      <h2>Program</h2>\n      \n      <p>Az este 19:00-kor kezdődik üdvözlő koktéllal és könnyű harapnivalókkal. 20:00-tól ünnepi vacsora következik, majd 22:00-tól élő zene és tánc.</p>\n      \n      <h2>Tombola és Meglepetések</h2>\n      \n      <p>Éjfél előtt nagy tombolát tartunk, melynek főnyereménye egy hétvégi wellness csomag két főre! De lesz sok más nyeremény is: borok, ajándékkosarak és éttermi utalványok.</p>\n      \n      <h2>Éjféli Pezsgő</h2>\n      \n      <p>Éjfélkor pezsgővel koccintunk az új évre, közös visszaszámlálással és tűzijátékkal a teraszon (időjárás függvényében).</p>\n      \n      <p>A szilveszteri est ára: 35.000 Ft/fő, amely tartalmazza a vacsorát, a korlátlan italfogyasztást és a tombolajegyet. Szállásfoglalással kombinálva 10% kedvezmény!</p>\n      \n      <p>Helyek száma korlátozott, foglalj időben!</p>\n    \n    ",date:"2025. november 25.",readTime:"3 perc",image:"/new-years-eve-party-champagne-celebration-dark-ele.jpg",category:"Esemény",author:"Kovács Márton",authorImage:"/friendly-hungarian-man-portrait.jpg"},{id:4,slug:"pincetura-a-borvideken",title:"Pincetúra a borvidéken",excerpt:"Csatlakozz exkluzív pincetúránkhoz! Fedezd fel a Budafoki borvidék rejtett kincseit szakértő vezetéssel.",content:'\n\n      <p>A Budafoki borvidék Magyarország egyik legrégebbi és legjelentősebb bortermelő területe. Most lehetőséged nyílik felfedezni a föld alatti pincerendszert és megkóstolni a régió legjobb borait.</p>\n      \n      <h2>A Túra Programja</h2>\n      \n      <p>A pincetúra minden hónap első szombatján indul a Zarándokháztól 14:00-kor. A mintegy 3 órás program során 3 pincét látogatunk meg, mindegyikben 3-4 bort kóstolunk.</p>\n      \n      <h2>Mit Láthatsz?</h2>\n      \n      <p>A Budafoki pincerendszer évszázados története során több mint 100 kilométernyi járatot vágtak a mészkőbe. Némelyik pince a török időkből származik! A túra során betekintést nyersz a hagyományos borászati módszerekbe és a modern technológiákba egyaránt.</p>\n      \n      <blockquote>"A budafoki pincék nem csak a borok otthona, hanem Budapest rejtett kincsei is." - Szabó János, borszakértő</blockquote>\n      \n      <h2>Részvételi Díj</h2>\n      \n      <p>A túra ára 12.000 Ft/fő, amely tartalmazza a vezetést, a borkóstolót (10-12 bor) és egy kis hideg tálat. A Zarándokház vendégeinek 15% kedvezmény!</p>\n      \n      <p>Jelentkezés a recepción vagy online. Minimum létszám: 6 fő, maximum: 15 fő.</p>\n    \n    ',date:"2025. november 20.",readTime:"4 perc",image:"/wine-cellar-tour-barrels-candlelight-dark-moody.jpg",category:"Kirándulás",author:"Szabó János",authorImage:"/hungarian-wine-expert-man-portrait.jpg"},{id:5,slug:"uj-kiallitas-a-galeriaban",title:"Új kiállítás a galériában",excerpt:"Kovács Anna 'Fények és Árnyékok' című kiállítása december elsejétől látható galériánkban.",content:'\n\n      <p>Örömmel jelentjük be, hogy december 1-jétől új kiállítás nyílik galériánkban! Kovács Anna fiatal magyar festőművész "Fények és Árnyékok" című tárlata január végéig tekinthető meg.</p>\n      \n      <h2>A Kiállításról</h2>\n      \n      <p>Kovács Anna munkái a fény és árnyék játékát vizsgálják különböző városi és természeti környezetben. Olajfestményei és akvarelljei egyaránt megtalálhatók a kiállításon, összesen 24 alkotás.</p>\n      \n      <h2>A Művészről</h2>\n      \n      <p>Kovács Anna 1992-ben született Budapesten. A Magyar Képzőművészeti Egyetemen végzett 2016-ban. Azóta számos hazai és nemzetközi kiállításon szerepelt munkáival. Ez az első önálló tárlata a Zarándokházban.</p>\n      \n      <blockquote>"A fény és árnyék számomra az élet metaforája – a kettő egymás nélkül nem létezhet, és együtt teremtik meg a harmóniát." - Kovács Anna</blockquote>\n      \n      <h2>Megnyitó</h2>\n      \n      <p>A kiállítás ünnepélyes megnyitója december 1-jén, szombaton 17:00-kor lesz. A megnyitón a művész személyesen is jelen lesz, és rövid tárlatvezetést tart. A megnyitó után borkóstolóval és könnyű vacsorával várjuk a vendégeket.</p>\n      \n      <p>A kiállítás megtekintése ingyenes, a megnyitó eseményre regisztráció szükséges.</p>\n    \n    ',date:"2025. november 15.",readTime:"3 perc",image:"/art-gallery-opening-exhibition-paintings-dark-eleg.jpg",category:"Kultúra",author:"Fekete Adrienn",authorImage:"/hungarian-art-curator-woman-portrait.jpg"},{id:6,slug:"borkostoloi-tanfolyam-indul",title:"Borkóstolói tanfolyam indul",excerpt:"Januárban elindul 6 részes borkóstolói tanfolyamunk kezdők és haladók számára egyaránt.",content:"\n\n      <p>Szeretnéd jobban megérteni a borok világát? Januártól 6 részes borkóstolói tanfolyamot indítunk, ahol az alapoktól a haladó technikákig mindent megtudhatsz!</p>\n      \n      <h2>A Tanfolyam Felépítése</h2>\n      \n      <p>A tanfolyam 6 alkalomból áll, minden csütörtökön 18:00-20:30 között. Az első három alkalom a kezdőknek szól, a második három a haladóknak – de természetesen mindenkit várunk a teljes sorozatra!</p>\n      \n      <h2>Tematika</h2>\n      \n      <p><strong>1. alkalom:</strong> A borkóstolás alapjai, a szőlőfajták<br/>\n      <strong>2. alkalom:</strong> Magyar borvidékek fehérborai<br/>\n      <strong>3. alkalom:</strong> Magyar borvidékek vörösborai<br/>\n      <strong>4. alkalom:</strong> Nemzetközi borok, összehasonlítás<br/>\n      <strong>5. alkalom:</strong> Étel-bor párosítás<br/>\n      <strong>6. alkalom:</strong> Vizsga és záró borkóstoló</p>\n      \n      <h2>Árak és Jelentkezés</h2>\n      \n      <p>A teljes tanfolyam ára: 85.000 Ft/fő (6 alkalom, alkalmanként 6-8 bor kóstolása, jegyzet). Egyéni alkalmak: 16.000 Ft/fő. A Zarándokház vendégeinek 10% kedvezmény!</p>\n      \n      <p>Jelentkezési határidő: december 20. Minimum létszám: 8 fő, maximum: 16 fő.</p>\n    \n    ",date:"2025. november 10.",readTime:"3 perc",image:"/wine-tasting-class-sommelier-dark-bar-elegant.jpg",category:"Tanfolyam",author:"Szabó János",authorImage:"/hungarian-wine-expert-man-portrait.jpg"},{id:7,slug:"wellness-hetvege-akcio",title:"Wellness hétvége akció",excerpt:"December első hétvégéjén 20% kedvezmény a wellness szolgáltatásainkra! Foglalj most!",content:"\n\n      <p>December első hétvégéjén (december 6-8.) különleges wellness akcióval várunk! Minden wellness szolgáltatásunkra 20% kedvezményt biztosítunk.</p>\n      \n      <h2>Elérhető Szolgáltatások</h2>\n      \n      <p>A kedvezmény vonatkozik a szaunára, a gőzfürdőre, a masszázsokra és a pipatórium használatára is. A kedvezmény szállásfoglalás nélkül is igénybe vehető!</p>\n      \n      <h2>Masszázs Menü</h2>\n      \n      <p><strong>Relaxáló masszázs (60 perc):</strong> 12.000 Ft helyett 9.600 Ft<br/>\n      <strong>Aromaterápiás masszázs (75 perc):</strong> 15.000 Ft helyett 12.000 Ft<br/>\n      <strong>Páros masszázs (60 perc):</strong> 22.000 Ft helyett 17.600 Ft</p>\n      \n      <h2>Wellness Belépő</h2>\n      \n      <p>A wellness részleg belépő ára 6.000 Ft helyett 4.800 Ft, amely tartalmazza a szauna, gőzfürdő és pihenő használatát 3 órán keresztül.</p>\n      \n      <p>Az akció nem kombinálható más kedvezményekkel. Előzetes foglalás szükséges!</p>\n    \n    ",date:"2025. november 5.",readTime:"2 perc",image:"/spa-wellness-sauna-relaxation-dark-moody.jpg",category:"Akció",author:"Kiss Virág",authorImage:"/hungarian-wellness-therapist-woman-portrait.jpg"},{id:8,slug:"csapatepito-programok-cegeknek",title:"Csapatépítő programok cégeknek",excerpt:"Egyedi csapatépítő programokat kínálunk cégek számára – borkóstoló, főzőtanfolyam és wellness.",content:"\n\n      <p>A Zarándokház nem csak magánszemélyeknek, hanem cégeknek is ideális helyszín! Egyedi csapatépítő programjainkat igényeitek szerint állítjuk össze.</p>\n      \n      <h2>Programjaink</h2>\n      \n      <p><strong>Borkóstoló verseny:</strong> Csapatok versengenek a borok felismerésében és párosításában. Szórakoztató és tanulságos egyszerre!</p>\n      \n      <p><strong>Főzőtanfolyam:</strong> Csapatokban főztök tradicionális magyar ételeket séfünk vezetésével. A végén közösen megkóstoljátok az alkotásokat!</p>\n      \n      <p><strong>Wellness & Wine:</strong> Relaxáló wellness program borkóstolóval kombinálva. Tökéletes év végi jutalom a csapatnak!</p>\n      \n      <h2>Helyszín</h2>\n      \n      <p>A programok a Zarándokház rendezvénytermében és éttermi részlegében zajlanak. Maximum 50 fő fogadására vagyunk felkészülve.</p>\n      \n      <h2>Árajánlat</h2>\n      \n      <p>Az árak a létszámtól és a választott programtól függenek. Kérjetek egyedi ajánlatot a sales@zarandokhaz.hu címen vagy hívjatok minket!</p>\n      \n      <p>Foglaljatok időben, különösen a karácsonyi időszakra!</p>\n    \n    ",date:"2025. november 1.",readTime:"4 perc",image:"/corporate-team-building-event-wine-tasting-group.jpg",category:"Üzleti",author:"Kovács Márton",authorImage:"/friendly-hungarian-man-portrait.jpg"}]])},35565,e=>{"use strict";var t=e.i(93215),n=e.i(81565),a=e.i(3976),r=e.i(81365),s=e.i(9643),l=e.i(74371),o=e.i(54195),i=e.i(74460),k=e.i(45196),g=e.i(6705),d=e.i(62960),p=e.i(43036),m=e.i(63784),c=e.i(97557),u=e.i(50478),z=e.i(68302),h=e.i(93695);e.i(10268);var y=e.i(36585),v=e.i(2157),b=e.i(50227),f=e.i(45192);async function j(){return Response.json(f.allNews)}async function x(e){let t,n,a,r;if(e.cookies.get("admin")?.value!=="1")return new Response("Unauthorized",{status:401});let s=await e.json(),l=b.default.join(process.cwd(),"lib","news-data.tsx"),o=f.allNews.slice(),i={id:o.length?Math.max(...o.map(e=>e.id))+1:1,slug:s.slug?String(s.slug):String(s.title).toLowerCase().replace(/[^a-z0-9áéíóöőúüű\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),title:String(s.title||"Untitled"),excerpt:String(s.excerpt||""),content:(t=String(String(s.content||"")||""),n=[],r=(a=(t=(t=(t=(t=t.replace(/<style[\s\S]*?>[\s\S]*?<\/style>/gi,e=>(n.push(e),""))).replace(/<!DOCTYPE[\s\S]*?>/i,"")).replace(/<\/?html[\s\S]*?>/gi,"")).replace(/<\/?head[\s\S]*?>/gi,"")).match(/<body[^>]*>([\s\S]*?)<\/body>/i))?a[1]:t.replace(/<\/?body[^>]*>/gi,""),(n.join("\n")+"\n"+r).trim()),date:String(s.date||new Date().toLocaleDateString("hu-HU",{year:"numeric",month:"long",day:"numeric"})),readTime:String(s.readTime||"2 perc"),image:String(s.image||"/placeholder.svg"),category:String(s.category||"Esemény"),featured:!!s.featured,author:"",authorImage:""};o.unshift(i);let k=`export interface NewsArticle {
  id: number
  slug: string
  title: string
  excerpt: string
  content: string
  date: string
  readTime: string
  image: string
  category: string
  featured?: boolean
  author: string
  authorImage: string
}

export const allNews: NewsArticle[] = [
`+o.map(e=>`  {
    id: ${e.id},
    slug: ${JSON.stringify(e.slug)},
    title: ${JSON.stringify(e.title)},
    excerpt: ${JSON.stringify(e.excerpt)},
    content: ${JSON.stringify(e.content??"")},
    date: ${JSON.stringify(e.date)},
    readTime: ${JSON.stringify(e.readTime)},
    image: ${JSON.stringify(e.image)},
    category: ${JSON.stringify(e.category)},
    ${e.featured?"featured: true,\n    ":""}author: ${JSON.stringify(e.author??"")},
    authorImage: ${JSON.stringify(e.authorImage??"")},
  },
`).join("")+`]

export function getNewsArticle(slug: string): NewsArticle | undefined {
  return allNews.find((article) => article.slug === slug)
}

export function getRelatedArticles(currentSlug: string, limit = 3): NewsArticle[] {
  const current = allNews.find((article) => article.slug === currentSlug)
  if (!current) return allNews.slice(0, limit)

  return allNews
    .filter((article) => article.slug !== currentSlug)
    .sort((a, b) => {
      if (a.category === current.category && b.category !== current.category) return -1
      if (b.category === current.category && a.category !== current.category) return 1
      return 0
    })
    .slice(0, limit)
}
`;return v.default.writeFileSync(l,k,"utf8"),Response.json({ok:!0,article:i})}e.s(["GET",()=>j,"POST",()=>x],45989);var A=e.i(45989);let w=new t.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/news/route",pathname:"/api/news",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/Documents/git/budafoki-zarandokhaz-web/app/api/news/route.ts",nextConfigOutput:"",userland:A}),{workAsyncStorage:R,workUnitAsyncStorage:S,serverHooks:E}=w;function T(){return(0,a.patchFetch)({workAsyncStorage:R,workUnitAsyncStorage:S})}async function N(e,t,a){w.isDev&&(0,r.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let v="/api/news/route";v=v.replace(/\/index$/,"")||"/";let b=await w.prepare(e,t,{srcPage:v,multiZoneDraftMode:!1});if(!b)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:f,params:j,nextConfig:x,parsedUrl:A,isDraftMode:R,prerenderManifest:S,routerServerContext:E,isOnDemandRevalidate:T,revalidateOnlyGenerated:N,resolvedPathname:C,clientReferenceManifest:M,serverActionsManifest:O}=b,P=(0,i.normalizeAppPath)(v),F=!!(S.dynamicRoutes[P]||S.routes[C]),q=async()=>((null==E?void 0:E.render404)?await E.render404(e,t,A,!1):t.end("This page could not be found"),null);if(F&&!R){let e=!!S.routes[C],t=S.dynamicRoutes[P];if(t&&!1===t.fallback&&!e){if(x.experimental.adapterPath)return await q();throw new h.NoFallbackError}}let I=null;!F||w.isDev||R||(I="/index"===(I=C)?"/":I);let D=!0===w.isDev||!F,K=F&&!D;O&&M&&(0,l.setReferenceManifestsSingleton)({page:v,clientReferenceManifest:M,serverActionsManifest:O,serverModuleMap:(0,o.createServerModuleMap)({serverActionsManifest:O})});let H=e.method||"GET",$=(0,s.getTracer)(),_=$.getActiveScopeSpan(),U={params:j,prerenderManifest:S,renderOpts:{experimental:{authInterrupts:!!x.experimental.authInterrupts},cacheComponents:!!x.cacheComponents,supportsDynamicResponse:D,incrementalCache:(0,r.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:x.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,n,a)=>w.onRequestError(e,t,a,E)},sharedContext:{buildId:f}},J=new k.NodeNextRequest(e),B=new k.NodeNextResponse(t),Z=g.NextRequestAdapter.fromNodeNextRequest(J,(0,g.signalFromNodeResponse)(t));try{let l=async e=>w.handle(Z,U).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let n=$.getRootSpanAttributes();if(!n)return;if(n.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${n.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=n.get("next.route");if(a){let t=`${H} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${H} ${v}`)}),o=!!(0,r.getRequestMeta)(e,"minimalMode"),i=async r=>{var s,i;let k=async({previousCacheEntry:n})=>{try{if(!o&&T&&N&&!n)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await l(r);e.fetchMetrics=U.renderOpts.fetchMetrics;let i=U.renderOpts.pendingWaitUntil;i&&a.waitUntil&&(a.waitUntil(i),i=void 0);let k=U.renderOpts.collectedTags;if(!F)return await (0,m.sendResponse)(J,B,s,U.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,c.toNodeOutgoingHttpHeaders)(s.headers);k&&(t[z.NEXT_CACHE_TAGS_HEADER]=k),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let n=void 0!==U.renderOpts.collectedRevalidate&&!(U.renderOpts.collectedRevalidate>=z.INFINITE_CACHE)&&U.renderOpts.collectedRevalidate,a=void 0===U.renderOpts.collectedExpire||U.renderOpts.collectedExpire>=z.INFINITE_CACHE?void 0:U.renderOpts.collectedExpire;return{value:{kind:y.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:n,expire:a}}}}catch(t){throw(null==n?void 0:n.isStale)&&await w.onRequestError(e,t,{routerKind:"App Router",routePath:v,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:K,isOnDemandRevalidate:T})},E),t}},g=await w.handleResponse({req:e,nextConfig:x,cacheKey:I,routeKind:n.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:S,isRoutePPREnabled:!1,isOnDemandRevalidate:T,revalidateOnlyGenerated:N,responseGenerator:k,waitUntil:a.waitUntil,isMinimalMode:o});if(!F)return null;if((null==g||null==(s=g.value)?void 0:s.kind)!==y.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==g||null==(i=g.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});o||t.setHeader("x-nextjs-cache",T?"REVALIDATED":g.isMiss?"MISS":g.isStale?"STALE":"HIT"),R&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let d=(0,c.fromNodeOutgoingHttpHeaders)(g.value.headers);return o&&F||d.delete(z.NEXT_CACHE_TAGS_HEADER),!g.cacheControl||t.getHeader("Cache-Control")||d.get("Cache-Control")||d.set("Cache-Control",(0,u.getCacheControlHeader)(g.cacheControl)),await (0,m.sendResponse)(J,B,new Response(g.value.body,{headers:d,status:g.value.status||200})),null};_?await i(_):await $.withPropagatedContext(e.headers,()=>$.trace(d.BaseServerSpan.handleRequest,{spanName:`${H} ${v}`,kind:s.SpanKind.SERVER,attributes:{"http.method":H,"http.target":e.url}},i))}catch(t){if(t instanceof h.NoFallbackError||await w.onRequestError(e,t,{routerKind:"App Router",routePath:P,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:K,isOnDemandRevalidate:T})}),F)throw t;return await (0,m.sendResponse)(J,B,new Response(null,{status:500})),null}}e.s(["handler",()=>N,"patchFetch",()=>T,"routeModule",()=>w,"serverHooks",()=>E,"workAsyncStorage",()=>R,"workUnitAsyncStorage",()=>S],35565)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__91d4aef1._.js.map